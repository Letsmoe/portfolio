---
import Layout from "~/layouts/Layout.astro";
import Story from "~/components/Story.astro";
import StoryFilter from "~/components/StoryFilter.svelte";
import Search from "~/components/Search.svelte";
const stories = await Astro.glob("../../content/blog/**/*.{mdx,md}");
const searchList = Object.values(stories).map(x => ({frontmatter: x.frontmatter, url: x.url}))

const categories = [
	...new Set(stories.map((x) => x.frontmatter.category).filter((x) => x)),
];
---

<Layout title="Blog - Letsmoe">
	<main class="max-w-[1200px] w-full mx-auto">
		<div class="mb-4 flex justify-between">
			<StoryFilter categories={categories} client:load />
			<Search searchList={searchList} client:load></Search>
		</div>
		<div class="grid grid-cols-1 gap-4 lg:grid-cols-2">
			{stories.sort(
				(a, b) => b.frontmatter.order - a.frontmatter.order
			).map((story) => <Story data={story} />)}
		</div>
	</main>
</Layout>
